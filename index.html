<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>남경 검수시스템 · Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { background:#eef1f5; }

    /* 카드 /헤더 간격  */
    .card {
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:14px;
      box-shadow:0 1px 2px rgba(0,0,0,.04);
    }
    .card-h {
      padding: 8px 10px;
      border-bottom:1px solid #f1f5f9;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .card-b { padding: 8px 10px; }

    .title { font-size:12px; font-weight:900; color:#0f172a; line-height:1.2; }
    .sub   { font-size:11px; font-weight:700; color:#64748b; line-height:1.2; margin-top:2px; }
    .tag   { font-size:11px; font-weight:800; color:#64748b; white-space:nowrap; }

    /*  테이블: 폰트/간격  */
    .tbl{
      width:100%;
      border-collapse:collapse;
      table-layout:fixed;
    }
    .tbl th,
    .tbl td{
      padding:8px 10px;
      border-top:1px solid #eef2f7;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      vertical-align:middle;

      font-size:13px;
      font-weight:600;
      color:#0f172a;
      letter-spacing:-0.1px;
    }
    .tbl thead th{
      border-top:none;
      color:#475569;
      text-align:center;
      font-weight:700;
    }
    .tbl td{
      text-align:center;
      font-variant-numeric: tabular-nums;
    }
    .tbl th:first-child,
    .tbl td:first-child{
      text-align:left;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }

    .cut{
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }

    /* 오른쪽 작은 카드 */
    .mini .card-h { padding:8px 10px; }
    .mini .card-b { padding:10px; }
    .kv { display:flex; align-items:center; justify-content:space-between; }
    .kv span { font-size:12px; font-weight:800; color:#475569; }
    .kv b { font-size:12px; font-weight:900; color:#0f172a; font-variant-numeric: tabular-nums; }

    /* Dock cards (좌측) */
.dock-card{
  background: linear-gradient(180deg, #0b122a 0%, #111c3f 100%);
  color:#fff;
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  padding:14px;
  box-shadow:0 10px 28px rgba(15,23,42,.20);
}
.dock-head{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.dock-title{ font-size:12px; font-weight:950; color:rgba(255,255,255,.90); }
.pill{
  font-size:10px; padding:3px 9px; border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.08);
  color:rgba(255,255,255,.88);
  font-weight:900;
}
.dock-owner{ margin-top:8px; font-size:13px; font-weight:950; color:rgba(255,255,255,.95); }
.dock-table{ width:100%; border-collapse:separate; border-spacing:0; margin-top:8px; }
.dock-table th{
  text-align:left; font-size:10px; color:rgba(255,255,255,.65); font-weight:950;
  padding:6px 6px; border-bottom:1px solid rgba(255,255,255,.10); white-space:nowrap;
}
.dock-table td{
  font-size:11px; color:rgba(255,255,255,.92); font-weight:950;
  padding:6px 6px; border-bottom:1px solid rgba(255,255,255,.06); white-space:nowrap;
}
.dock-table tr:last-child td{ border-bottom:none; }

.scroll-box{
  max-height: 260px;
  overflow:auto;
}
.scroll-box::-webkit-scrollbar{ width:8px; }
.scroll-box::-webkit-scrollbar-thumb{ background:#d7dee8; border-radius:999px; }
.scroll-box::-webkit-scrollbar-track{ background:transparent; }

.boardbar{
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:18px;
  box-shadow:0 1px 2px rgba(0,0,0,.05);
}

  </style>
</head>

<body class="min-h-screen">

  <!-- nav.js -->
  <script src="nav.js"></script>
  <script type="module" src="./js/index.js"></script>

  <div class="max-w-[1700px] mx-auto pt-16 px-4 md:px-6 pb-8">
    <div class="relative">

      <main class="min-w-0">

        <!-- 상단바 -->
        <div id="boardBar" class="mb-4 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm">
          <div class="flex items-center justify-between gap-3">
            <div class="flex items-center gap-3 min-w-0">
              <div class="text-[11px] font-extrabold text-slate-500 tracking-widest">DISPLAY MODE</div>
              <div class="hidden md:block text-sm font-extrabold text-slate-900 truncate">
                남경 검수시스템 · DASHBOARD
              </div>
            </div>

            <div class="flex items-center gap-3">
              <button id="btnSidebar"
                class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 text-[12px] font-extrabold text-slate-800 hover:bg-slate-50">
                MENU
              </button>

              <div class="text-right">
                <div id="boardClock" class="text-lg md:text-xl font-extrabold tabular-nums text-slate-900">--:--:--</div>
                <div class="text-[11px] text-slate-500">
                  마지막 갱신:
                  <span id="dataUpdatedTop" class="font-extrabold text-sky-700">-</span>
                </div>
              </div>

              <button id="btnFullscreen"
                class="hidden md:inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[12px] font-extrabold text-slate-800 hover:bg-slate-100">
                FULLSCREEN
              </button>
            </div>
          </div>
        </div>

        <!-- =========================
             4열 레이아웃 
        ========================== -->
        <section class="grid grid-cols-12 gap-3">

          <!-- ✅ 좌측: 상차장 (xl:3) -->
          <div class="col-span-12 xl:col-span-3 space-y-3">

            <div class="dock-card">
              <div class="dock-head"><div class="dock-title">A 상차장</div><span class="pill">LIVE</span></div>
              <div class="dock-owner">담당자 - <span id="dock_a_owner">-</span></div>
              <table class="dock-table">
                <thead><tr><th>인보이스</th><th>국가</th><th>컨테이너</th><th>상차시간</th><th>CBM</th><th>작업여부</th></tr></thead>
                <tbody id="dock_a_list"><tr><td colspan="6" class="muted">구글 CSV 연동 예정</td></tr></tbody>
              </table>
            </div>

            <div class="dock-card">
              <div class="dock-head"><div class="dock-title">이동-1 상차장</div><span class="pill">LIVE</span></div>
              <div class="dock-owner">담당자 - <span id="dock_m1_owner">-</span></div>
              <table class="dock-table">
                <thead><tr><th>인보이스</th><th>국가</th><th>컨테이너</th><th>상차시간</th><th>CBM</th><th>작업여부</th></tr></thead>
                <tbody id="dock_m1_list"><tr><td colspan="6" class="muted">구글 CSV 연동 예정</td></tr></tbody>
              </table>
            </div>

            <div class="dock-card">
              <div class="dock-head"><div class="dock-title">이동-2 상차장</div><span class="pill">LIVE</span></div>
              <div class="dock-owner">담당자 - <span id="dock_m2_owner">-</span></div>
              <table class="dock-table">
                <thead><tr><th>인보이스</th><th>국가</th><th>컨테이너</th><th>상차시간</th><th>CBM</th><th>작업여부</th></tr></thead>
                <tbody id="dock_m2_list"><tr><td colspan="6" class="muted">구글 CSV 연동 예정</td></tr></tbody>
              </table>
            </div>

            <div class="dock-card">
              <div class="dock-head"><div class="dock-title">B-1 상차장</div><span class="pill">LIVE</span></div>
              <div class="dock-owner">담당자 - <span id="dock_b1_owner">-</span></div>
              <table class="dock-table">
                <thead><tr><th>인보이스</th><th>국가</th><th>컨테이너</th><th>상차시간</th><th>CBM</th><th>작업여부</th></tr></thead>
                <tbody id="dock_b1_list"><tr><td colspan="6" class="muted">구글 CSV 연동 예정</td></tr></tbody>
              </table>
            </div>

            <div class="dock-card">
              <div class="dock-head"><div class="dock-title">B-2 상차장</div><span class="pill">LIVE</span></div>
              <div class="dock-owner">담당자 - <span id="dock_b2_owner">-</span></div>
              <table class="dock-table">
                <thead><tr><th>인보이스</th><th>국가</th><th>컨테이너</th><th>상차시간</th><th>CBM</th><th>작업여부</th></tr></thead>
                <tbody id="dock_b2_list"><tr><td colspan="6" class="muted">구글 CSV 연동 예정</td></tr></tbody>
              </table>
            </div>

          </div>

          <!-- LEFT: 출고 누계/요약 (xl:4) -->
          <div class="col-span-12 xl:col-span-4 space-y-3"> 

           
            <!-- 출고 요약 -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">출고 요약</div>
                  <div class="sub">컨테이너 · LCL · 요약</div>
                </div>
                <div class="tag">당일</div>
              </div>

              <div class="card-b">
                <table class="tbl">
                  <colgroup>
                    <col style="width:19%">
                    <col style="width:21%">
                    <col style="width:15%">
                    <col style="width:12%">
                    <col style="width:18%">
                    <col style="width:15%">
                  </colgroup>
                  <thead>
                    <tr>
                      <th>인보이스</th>
                      <th>국가</th>
                      <th>컨테이너</th>
                      <th>위치</th>
                      <th>상차시간</th>
                      <th>작업여부</th>
                    </tr>
                  </thead>
                  <tbody id="ship_today_tbody">
                    <tr><td colspan="6" class="muted">loading</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

            
              <!-- 출고정보 7일 -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">출고정보 (오늘기준 7일 내역)</div>
                  <div class="sub">------</div>
                </div>
                <div class="tag">7일</div>
              </div>
              <div class="card-b">
                <table class="tbl">
                  <colgroup>
                    <col style="width:20%">
                    <col style="width:20%">
                    <col style="width:20%">
                    <col style="width:20%">
                    <col style="width:20%">
                  </colgroup>
                  <thead>
                    <tr>
                      <th>날짜</th>
                      <th>20pt</th>
                      <th>40pt</th>
                      <th>LCL</th>
                      <th>합계</th>
                    </tr>
                  </thead>
                  <tbody id="ship_7days_tbody">
                    <tr><td colspan="5" class="muted">loading</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

              
          </div>

          <!-- MIDDLE: 월별/7일 (xl:3) -->
          <div class="col-span-12 xl:col-span-3 space-y-3">  
            
           <!-- 출고 누계 -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">출고 누계</div>
                  <div class="sub">1월~12월 · 컨테이너 & LCL · 누계</div>
                </div>
                <div class="tag">누계</div>
              </div>
              <div class="card-b">
                <table class="tbl">
                  <colgroup>
                    <col style="width:28%">
                    <col style="width:18%">
                    <col style="width:18%">
                    <col style="width:18%">
                    <col style="width:18%">
                  </colgroup>
                  <thead>
                    <tr>
                      <th>구분</th>
                      <th>20pt</th>
                      <th>40pt</th>
                      <th>LCL</th>
                      <th>합계</th>
                    </tr>
                  </thead>
                  <tbody id="ship_total_tbody">
                    <tr><td colspan="5" class="muted">loading</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- 월별 출고  -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">월별 출고 누계</div>
                  <div class="sub">------</div>
                </div>
                <div class="tag">누계</div>
              </div>
              <div class="card-b">
                <table class="tbl">
                  <colgroup>
                    <col style="width:20%">
                    <col style="width:20%">
                    <col style="width:20%">
                    <col style="width:20%">
                    <col style="width:20%">
                  </colgroup>
                  <thead>
                    <tr>
                      <th>월</th>
                      <th>20pt</th>
                      <th>40pt</th>
                      <th>LCL</th>
                      <th>합계</th>
                    </tr>
                  </thead>
                  <tbody id="ship_monthly_tbody">
                    <tr><td colspan="5" class="muted">loading</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
             
              <!-- 작업장별 작업수량 (전체누계) -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">작업장별 작업수량</div>
                  <div class="sub">1월~ 12월 누계</div>
                </div>
                <div class="tag">전체누계</div>
              </div>
              <div class="card-b">
                <table class="tbl">
                  <colgroup>
                    <col style="width:20%">
                    <col style="width:40%">
                    <col style="width:40%">
                  </colgroup>
                  <thead>
                    <tr>
                      <th>구분</th>
                      <th>작업량</th>
                      <th>평균</th>
                    </tr>
                  </thead>
                  <tbody id="work_total_tbody">
                    <tr><td class="cut">보수A</td><td>-</td><td>-</td></tr>
                    <tr><td class="cut">보수B</td><td>-</td><td>-</td></tr>
                    <tr><td class="cut">설비</td><td>-</td><td>-</td></tr>
                    <tr><td class="cut font-extrabold">전체</td><td class="font-extrabold">-</td><td class="font-extrabold">-</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          
          </div>

          <!-- RIGHT: 미니 (xl:2) -->
          <div class="col-span-12 xl:col-span-2 space-y-3 mini"> 

            <!-- 보수작업 (당월) -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">보수작업</div>
                  <div class="sub">sap_item + bosu</div>
                </div>
                <div class="tag">당월</div>
              </div>
              <div class="card-b space-y-2">
                <div class="kv"><span>작업 예상량</span><b id="rep_cur_plan">-</b></div>
                <div class="kv"><span>작업량(완료)</span><b id="rep_cur_done">-</b></div>
                <div class="kv"><span>잔량</span><b id="rep_cur_remain">-</b></div>
              </div>
            </div>

            <!-- 보수작업 (다음달) -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">보수작업</div>
                  <div class="sub">sap_item + bosu</div>
                </div>
                <div class="tag">다음달</div>
              </div>
              <div class="card-b space-y-2">
                <div class="kv"><span>작업 예상량</span><b id="rep_next_plan">-</b></div>
                <div class="kv"><span>작업량(완료)</span><b id="rep_next_done">-</b></div>
                <div class="kv"><span>잔량</span><b id="rep_next_remain">-</b></div>
              </div>
            </div>

            <!-- 설비 (당월) -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">설비 작업</div>
                  <div class="sub">daily</div>
                </div>
                <div class="tag">당월</div>
              </div>
              <div class="card-b space-y-2">
                <div class="kv"><span>설비 작업량</span><b id="fac_cur_qty">-</b></div>
                <div class="kv"><span>설비 평균 작업량</span><b id="fac_cur_avg">-</b></div>
              </div>
            </div>

            <!-- 설비 (다음달) -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">설비 작업</div>
                  <div class="sub">daily</div>
                </div>
                <div class="tag">다음달</div>
              </div>
              <div class="card-b space-y-2">
                <div class="kv"><span>설비 작업량</span><b id="fac_next_qty">-</b></div>
                <div class="kv"><span>설비 평균 작업량</span><b id="fac_next_avg">-</b></div>
              </div>
            </div>

          
            <!-- 재고 합계 (wms) -->
            <div class="card">
              <div class="card-h">
                <div>
                  <div class="title">재고 합계</div>
                  <div class="sub">wms · 수량 합계</div>
                </div>
                <div class="tag">WMS</div>
              </div>
              <div class="card-b space-y-2">
                <div class="kv"><span>총 수량</span><b id="k_inventory">-</b></div>
              </div>
            </div>

          </div>
        </section>

      </main>
    </div>
  </div>

  <!-- =========================
        JS: 사이드바 + 시계 + 풀스크린 
  ========================== -->
  <script>
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("sidebarOverlay");
    const btnSidebar = document.getElementById("btnSidebar");

    function openSidebar() {
      if (!sidebar) return;
      sidebar.classList.remove("-translate-x-full");
      overlay && overlay.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    }
    function closeSidebar() {
      if (!sidebar) return;
      sidebar.classList.add("-translate-x-full");
      overlay && overlay.classList.add("hidden");
      document.body.style.overflow = "";
    }
    btnSidebar && btnSidebar.addEventListener("click", () => {
      if (!sidebar) return;
      const isClosed = sidebar.classList.contains("-translate-x-full");
      if (isClosed) openSidebar();
      else closeSidebar();
    });
    overlay && overlay.addEventListener("click", closeSidebar);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeSidebar();
    });

    // Clock (KST)
    const clockEl = document.getElementById("boardClock");
    const KST_TIME_FMT = new Intl.DateTimeFormat("ko-KR", {
      timeZone: "Asia/Seoul",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
    });
    function tickClock() {
      if (clockEl) clockEl.textContent = KST_TIME_FMT.format(new Date());
    }
    tickClock();
    setInterval(tickClock, 1000);

    // Fullscreen
    const fsBtn = document.getElementById("btnFullscreen");
    if (fsBtn) {
      fsBtn.addEventListener("click", async () => {
        try {
          if (!document.fullscreenElement) await document.documentElement.requestFullscreen();
          else await document.exitFullscreen();
        } catch (e) {
          console.warn("fullscreen failed:", e);
        }
      });
    }
  </script>

</body>
</html>
